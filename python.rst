.. SimpleUI documentation master file, created by
   sphinx-quickstart on Sat May 16 14:23:51 2020.
   You can adapt this file completely to your liking, but it should at least
   contain the root `toctree` directive.

Python в обработчиках
=======================

Приложения Simple UI могут использовать интерпретатор Python для выполнения кода обработчиков  в любом режиме. Можно писать код обработчиков используя процедуры, классы, библиотеки. Перечень библиотек и актуальная версия интерпретатора может меняться от релиза к релизу и информация об этом будет обновляться.

На текущий момент используется:

 *  Версия Python - 3.8


Подключены библиотеки:


 *  Стандартные библиотеки
 *  Requests
 *  Lxml
 *  Pandas
 *  BeautifulSoup


.. note:: Apk по умолчанию не включает поддержку режима x_86 поэтому не будет выполняться в эмуляторе на ПК. Если нужен такой режим – обращайтесь за отдельной версией (изза большого размера не включается в стандартную поставку)

Обработчики Python для экранов "При запуске" и "Обработка ввода" могут выполняться совместно с обработчиками закладки «Offline&Rest» и обработчиками сервиса онлайн (1С) на экранах в последовательности: 1) Python 2) Offline&REST 3) 1С

Кроме того предусмотрены отдельные общие виды обработчиков: 

 *  При запуске конфигурации
 *  По расписанию (периодичность задается в настройках)
 *  При получении контента (поделиться, открыть файл) -* пока не документировано, см. демо

Планируются дальнейшее расширение видов обработчиков (более гибкая настройка обработчиков по разным расписаниям, взаимодействие с UI и т.д.)

Код обработчиков взаимодействует с данными и интерфейсов Simple UI через:

 *  Переменные (локальные и глобальные переменные, команды в переменных как обычно)
 *  Прямые запросы SQL в СУБД приложения

Все что нужно знать о взаимодействии с переменными,а следовательно и с самим приложением:

 *  Записать в Переменные : hashMap.put(“имя переменной”, значение перменной)
 *  Прочитать из переменных: hashMap.get(“имя переменной”)

Пример кода обработчика на Python:

.. code-block:: Python

  import json
  import requests
  
  r = requests.get('https://www.cbr-xml-daily.ru/daily_json.js')
  jdata = json.loads(r.text)
  rate =jdata.get("Valute").get("BRL").get("Value")
  #Записываем в Переменные
  hashMap.put("rate",rate)
